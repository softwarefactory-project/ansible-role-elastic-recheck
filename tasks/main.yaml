---
- name: Set proper facts
  include_tasks: recognize-facts.yml

- name: Configure mirrors
  include_tasks: configure-mirrors.yml

- name: Setup Opendistro Elasticsearch
  include_tasks: setup-elasticsearch.yml

- name: Setup Opendistro Kibana
  include_tasks: setup-kibana.yml

- name: Setup Opendistro Logstash
  include_tasks: setup-logstash.yml

- name: Setup Curator package
  include_tasks: setup-curator.yml

- name: Generate certs
  include_tasks: gen-certs.yml

- name: Configure Elasticsearch on main host
  include_tasks: configure-elasticsearch-main.yml

- name: Create users
  include_tasks: create-users.yml

- name: Configure Kibana
  include_tasks: configure-kibana.yml

- name: Configure container
  include_tasks: configure-opensearch.yml
  when: elasticsearch_distro | lower == 'opensearch'

- name: Configure Logstash
  include_tasks: configure-logstash.yml

- name: Web configuration
  include_tasks: web.yml
